# コミュニケーションガイドライン

## 目的

ユーザーとのコミュニケーションパターンを標準化し、スムーズなコラボレーションを実現する。

## 基本原則

タスク実行は以下のフローに従う:
1. タスク理解 → 2. 計画作成 → 3. ユーザー確認 → 4. 実装 → 5. セルフレビュー → 6. 完了報告

## 避けるべきパターン

### ❌ いきなり実装

```
ユーザー: 「機能Xを追加して」
Claude: [いきなり実装] → 「実装しました」
問題: ユーザーの意図と異なる可能性
```

### ❌ 計画なしで進める

```
ユーザー: 「大規模なリファクタリングを」
Claude: [計画なしで実装開始]
問題: 方向性の確認ができない
```

### ❌ ユーザー確認なしで次のステップへ

```
ユーザー: 「レビューをお願いします」
Claude: [レビュー] → [勝手に修正実行]
問題: ユーザーが準備できていない
```

### ❌ 段階的な修正を繰り返す

```
Claude: 「1箇所修正しました」
ユーザー: 「他にもないですか？」
Claude: 「2箇所目を修正しました」
ユーザー: 「まだあります...」
問題: 効率が悪い、ユーザーの時間を浪費
```

## 推奨パターン

### ✅ 計画 → 確認 → 実装 → レビュー → 報告

```
ユーザー: 「機能Xを追加して」
Claude:
  1. [計画作成]
  2. 「この計画で進めてよろしいでしょうか？」
ユーザー: 「承認します」
Claude:
  3. [実装]
  4. [セルフレビュー]
  5. 「実装完了しました。テストも通過しています」
```

### ✅ 一度の実装で完全な結果を提供

```
ユーザー: 「err変数の未使用を修正して」
Claude:
  1. [Grepで全検索]
  2. [全箇所を一度に修正]
  3. 「5箇所の未使用err変数を修正しました」
```

### ✅ 各フェーズでユーザー確認

```
ユーザー: 「ドキュメントを作成して」
Claude: 「章立てを検討しました。レビューをお願いします」
ユーザー: 「承認します」
Claude: [本文作成] → 「ドキュメントを作成しました」
```

## フェーズ別コミュニケーション

### タスク受領時
- タスクを理解する
- 必要に応じて計画を作成
- **ユーザーに確認**: 「この計画で進めてよろしいでしょうか？」
- 承認を待つ

### 実装中
- 長時間かかる場合は中間報告
- 不明点は実装前に質問（実装後ではない）
- 問題発生時は即座に報告・相談
- 黙って進めない

### 完了時
- セルフレビュー実施
- テスト・ビルド確認（該当する場合）
- **完了報告**: 実施内容と結果を簡潔に（例: テスト通過、ビルド成功）
- 次のアクションが必要な場合は提案

## ユーザー指示の解釈

### 「レビューして」「チェックして」

→ レビューのみ実施、修正は待つ

### 「修正して」

→ 修正のみ、実行は指示があるまで待つ

### 「実装して」「追加して」

→ 計画を立ててから実装

### 「すぐに〜」「今すぐ〜」

→ 承認済みとみなして実行可

## 期待される効果

- ユーザーとの認識齟齬の削減
- 手戻りの削減
- フィードバックループの短縮
- ユーザーの時間節約
- スムーズなコラボレーション
